<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigator Mobile App - UI Preview</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        html {
            overflow-x: hidden;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f8fafc;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        .phone-container {
            width: 375px;
            height: 812px;
            background: #000;
            border-radius: 40px;
            padding: 8px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .phone-screen {
            width: 100%;
            height: 100%;
            background: #f8fafc;
            border-radius: 32px;
            overflow: hidden;
            overflow-x: hidden;
            position: relative;
            isolation: isolate;
        }

        .phone-screen * {
            box-sizing: border-box;
        }

        /* Header */
        .header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 64px;
            background: #008FFF;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 12px;
            z-index: 100;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .hamburger-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 8px;
            transition: background-color 0.2s;
        }

        .hamburger-icon:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .hamburger-icon .material-icons {
            color: #ffffff;
            font-size: 24px;
        }

        .logo-text {
            font-size: 18px;
            font-weight: 600;
            color: #ffffff;
        }

        .right-actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .hotel-selector {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            max-width: 200px;
        }

        .hotel-info {
            display: flex;
            flex-direction: column;
        }

        .hotel-name {
            font-size: 14px;
            font-weight: 600;
            color: #ffffff;
        }

        .icon-button {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            cursor: pointer;
        }

        .badge {
            position: absolute;
            top: 4px;
            right: 4px;
            background: #ef4444;
            border-radius: 10px;
            min-width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
            font-size: 10px;
            font-weight: bold;
            color: #ffffff;
        }

        /* Loading Indicator */
        .page-loader {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 12px;
            pointer-events: none;
            background: rgba(248, 250, 252, 0.9);
            padding: 20px;
            border-radius: 12px;
        }

        .page-loader.show {
            display: flex;
        }

        .loader-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e2e8f0;
            border-top-color: #008FFF;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loader-text {
            font-size: 14px;
            color: #64748b;
            font-weight: 500;
        }

        /* Content Area */
        .content {
            margin-top: 64px;
            height: calc(100% - 64px);
            overflow-y: auto;
            overflow-x: hidden;
            padding: 16px;
        }

        /* Overview Page */
        .page-header {
            margin-bottom: 20px;
        }

        .page-title {
            font-size: 20px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 8px;
        }

        .page-subtitle {
            font-size: 12px;
            color: #64748b;
            line-height: 18px;
        }

        /* KPI Cards */
        .kpi-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 24px;
        }

        .kpi-card {
            background: #ffffff;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .kpi-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .kpi-icon-container {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .kpi-title {
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
            flex: 1;
        }

        .kpi-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .kpi-variance {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            margin-top: 4px;
        }

        .kpi-variance.positive {
            color: #10b981;
        }

        .kpi-variance.negative {
            color: #ef4444;
        }

        .kpi-variance.neutral {
            color: #64748b;
        }

        .variance-arrow {
            font-size: 14px;
            line-height: 1;
        }

        /* Section */
        .section {
            margin-bottom: 24px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 500;
            color: #1e293b;
        }

        .section-link {
            font-size: 14px;
            color: #008FFF;
            font-weight: 600;
            cursor: pointer;
        }

        /* View Toggle */
        .view-toggle {
            display: flex;
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 2px;
            gap: 2px;
        }

        .view-toggle-button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            background: transparent;
            border: none;
            color: #64748b;
        }

        .view-toggle-button.active {
            background: #008FFF;
            color: #ffffff;
        }

        .view-toggle-button .material-icons {
            font-size: 18px;
        }

        /* Table Navigation */
        .table-nav {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .table-nav-button {
            width: 32px;
            height: 32px;
            border-radius: 16px;
            background: #f1f5f9;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: none;
            padding: 0;
        }

        .table-nav-button:hover {
            background: #e2e8f0;
            box-shadow: none;
        }

        .table-nav-button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .table-nav-button .material-icons {
            font-size: 18px;
            color: #64748b;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Placeholder */
        .placeholder {
            background: #ffffff;
            border-radius: 12px;
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .placeholder-icon {
            font-size: 48px;
            color: #cbd5e1;
        }

        .placeholder-text {
            font-size: 16px;
            font-weight: 600;
            color: #64748b;
            margin-top: 12px;
        }

        .placeholder-subtext {
            font-size: 14px;
            color: #94a3b8;
            margin-top: 4px;
            text-align: center;
        }

        /* Insights Widget */
        .insights-wrapper {
            margin-bottom: 24px;
            width: 100%;
        }

        .insights-gradient-border {
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            min-height: 140px;
            background: linear-gradient(90deg, #8b5cf6 0%, #60a5fa 100%);
            padding: 1.5px;
        }

        .insights-content {
            padding: 16px;
            background: #e0f2fe;
            border-radius: 10px;
            min-height: 136px;
        }

        .insights-title {
            font-size: 14px;
            font-weight: 600;
            color: #64748b;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .insights-list {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .insight-item {
            margin-bottom: 0;
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }

        .insight-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #008FFF;
            margin-top: 8px;
            flex-shrink: 0;
        }

        .insight-text {
            font-size: 14px;
            font-weight: 500;
            color: #1e293b;
            line-height: 22px;
        }

        /* Health Score */
        .health-score-container {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .score-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: #f1f5f9;
            border: 4px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .score-value {
            font-size: 32px;
            font-weight: bold;
            color: #1e293b;
        }

        .score-label {
            font-size: 12px;
            color: #64748b;
            margin-top: 4px;
        }

        .health-metrics {
            flex: 1;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 12px;
            border-bottom: 1px solid #f1f5f9;
            margin-bottom: 16px;
        }

        .metric:last-child {
            margin-bottom: 0;
        }

        .metric-label {
            font-size: 14px;
            color: #64748b;
        }

        .metric-value {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
        }

        /* Channel Cards */
        .channel-section {
            position: relative;
        }

        .channel-subtitle {
            font-size: 12px;
            color: #64748b;
            margin-top: 4px;
            margin-bottom: 12px;
        }

        .channel-carousel {
            position: relative;
            overflow: hidden;
            width: 100%;
        }

        .channel-cards-container {
            display: flex;
            transition: transform 0.3s ease;
            gap: 0;
            width: 100%;
        }

        .channel-card {
            min-width: 100%;
            width: 100%;
            flex-shrink: 0;
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            box-sizing: border-box;
            position: relative;
        }

        .channel-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 0;
            border-bottom: none;
        }

        .channel-logo {
            width: 28px;
            height: 28px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 13px;
            color: #ffffff;
        }

        .channel-logo.booking {
            background: #003580;
        }

        .channel-logo.agoda {
            background: #FF6600;
        }

        .channel-logo.tripadvisor {
            background: #34E0A1;
        }

        .channel-logo.makemytrip {
            background: #FF6B35;
        }

        .channel-name {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
        }

        .channel-metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .channel-metric {
            text-align: center;
        }

        .metric-category {
            font-size: 11px;
            font-weight: 600;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .metric-main-value {
            font-size: 24px;
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .metric-sub-value {
            font-size: 12px;
            color: #94a3b8;
        }

        /* Market Demand Cards */
        .market-demand-carousel {
            position: relative;
            overflow: hidden;
            width: 100%;
        }

        .market-demand-cards-container {
            display: flex;
            transition: transform 0.3s ease;
            gap: 0;
            width: 100%;
        }

        .market-demand-card {
            min-width: 100%;
            width: 100%;
            flex-shrink: 0;
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            box-sizing: border-box;
            position: relative;
        }

        .market-demand-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .market-demand-card-title {
            font-size: 11px;
            font-weight: 600;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .market-demand-card-value {
            font-size: 24px;
            font-weight: bold;
            color: #1e293b;
        }

        .market-demand-nav {
            position: absolute;
            top: 12px;
            width: 32px;
            height: 32px;
            border-radius: 16px;
            background: #ffffff;
            border: none;
            outline: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            box-shadow: none;
            transition: all 0.2s;
        }

        .market-demand-nav:hover {
            background: #f8fafc;
            box-shadow: none;
        }

        .market-demand-nav.prev {
            right: 48px;
        }

        .market-demand-nav.next {
            right: 12px;
        }

        .market-demand-nav:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .market-demand-dots {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 16px;
        }

        .market-demand-dot {
            width: 8px;
            height: 8px;
            border-radius: 4px;
            background: #cbd5e1;
            cursor: pointer;
            transition: all 0.2s;
        }

        .market-demand-dot.active {
            background: #008FFF;
            width: 24px;
        }

        .channel-nav {
            position: absolute;
            top: 12px;
            width: 32px;
            height: 32px;
            border-radius: 16px;
            background: #ffffff;
            border: none;
            outline: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            box-shadow: none;
            transition: all 0.2s;
        }

        .channel-nav:hover {
            background: #f8fafc;
            box-shadow: none;
        }

        .channel-nav.prev {
            right: 48px;
        }

        .channel-nav.next {
            right: 12px;
        }

        .channel-nav:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .channel-dots {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 16px;
        }

        .channel-dot {
            width: 8px;
            height: 8px;
            border-radius: 4px;
            background: #cbd5e1;
            cursor: pointer;
            transition: all 0.2s;
        }

        .channel-dot.active {
            background: #008FFF;
            width: 24px;
        }

        /* Navigation Drawer */
        .drawer-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 250;
            border-radius: 32px;
        }

        .drawer-overlay.open {
            display: block;
        }

        .drawer {
            position: absolute;
            left: -246px;
            top: 0;
            width: 246px;
            height: 100%;
            background: #ffffff;
            box-shadow: 2px 0 8px rgba(0,0,0,0.1);
            transition: left 0.3s;
            z-index: 251;
            padding-top: 20px;
            display: flex;
            flex-direction: column;
        }

        .drawer.open {
            left: 0;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 4px;
            cursor: pointer;
        }

        .nav-item.active {
            background: #e0f2fe;
            border: 1px solid #bae6fd;
        }

        .nav-icon {
            margin-right: 12px;
            color: #64748b;
        }

        .nav-item.active .nav-icon {
            color: #008FFF;
        }

        .nav-item-text {
            font-size: 15px;
            font-weight: 500;
            color: #64748b;
        }

        .nav-item.active .nav-item-text {
            color: #008FFF;
            font-weight: 600;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }

        .tab {
            padding: 12px 0;
            font-size: 16px;
            font-weight: 600;
            color: #64748b;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
        }

        .tab.active {
            color: #008FFF;
            border-bottom-color: #008FFF;
        }

        /* Filter Bar */
        .filter-bar {
            background: #ffffff;
            border-bottom: 1px solid #e2e8f0;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: -16px;
            margin-left: -16px;
            margin-right: -16px;
            margin-bottom: 0;
            width: calc(100% + 32px);
        }

        .filter-label {
            font-size: 14px;
            font-weight: 600;
            color: #64748b;
            margin-right: 4px;
        }

        .filter-button {
            padding: 8px 16px;
            border-radius: 20px;
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            font-size: 14px;
            font-weight: 600;
            color: #64748b;
            cursor: pointer;
        }

        .filter-button.active {
            background: #008FFF;
            border-color: #008FFF;
            color: #ffffff;
        }

        /* Summary Grid */
        .summary-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .summary-card {
            background: #ffffff;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .summary-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .summary-icon-container {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .summary-title {
            font-size: 12px;
            font-weight: 600;
            color: #64748b;
            flex: 1;
        }

        .summary-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .summary-change {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        /* Footer */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 12px 16px 20px;
            background: #ffffff;
            border-top: 1px solid #e2e8f0;
        }

        .issues-badge {
            display: flex;
            align-items: center;
            gap: 6px;
            background: #ef4444;
            border-radius: 16px;
            padding: 6px 10px;
            position: fixed;
            bottom: 16px;
            left: 16px;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            cursor: pointer;
        }

        .issues-icon {
            width: 20px;
            height: 20px;
            border-radius: 10px;
            background: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
            color: #ef4444;
            flex-shrink: 0;
        }

        .issues-text {
            font-size: 12px;
            font-weight: 600;
            color: #ffffff;
            white-space: nowrap;
        }

        /* Menu Button */
        .menu-button {
            position: fixed;
            top: 80px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: #008FFF;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            cursor: pointer;
            z-index: 150;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        /* Calendar Styles */
        .calendar-container {
            background: #ffffff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .calendar-month {
            font-size: 18px;
            font-weight: bold;
            color: #1e293b;
        }

        .calendar-nav {
            display: flex;
            gap: 8px;
        }

        .calendar-nav-btn {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            background: #f1f5f9;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #64748b;
        }

        .calendar-nav-btn:hover {
            background: #e2e8f0;
        }

        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            margin-bottom: 8px;
        }

        .calendar-weekday {
            text-align: center;
            font-size: 12px;
            font-weight: 600;
            color: #64748b;
            padding: 8px 4px;
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }

        .calendar-day {
            aspect-ratio: 1;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            padding: 4px;
            transition: all 0.2s;
        }

        .calendar-day.empty {
            background: transparent;
            cursor: default;
        }

        .calendar-day.has-data {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
        }

        .calendar-day.has-data .calendar-day-number {
            color: #1e293b;
        }

        .calendar-day.has-data.demand-low {
            background: #93c5fd;
            border: 1px solid #93c5fd;
        }

        .calendar-day.has-data.demand-medium {
            background: #3b82f6;
            border: 1px solid #3b82f6;
        }

        .calendar-day.has-data.demand-high {
            background: #fca5a5;
            border: 1px solid #fca5a5;
        }

        .calendar-day.has-data.demand-very-high {
            background: #ef4444;
            border: 1px solid #ef4444;
        }


        .calendar-day-number {
            font-size: 13px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 2px;
            position: relative;
            z-index: 2;
            display: block;
            line-height: 1;
            width: 100%;
            text-align: center;
        }

        .calendar-day.has-data.demand-low .calendar-day-number,
        .calendar-day.has-data.demand-medium .calendar-day-number,
        .calendar-day.has-data.demand-high .calendar-day-number,
        .calendar-day.has-data.demand-very-high .calendar-day-number {
            color: #ffffff !important;
        }

        .calendar-day-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-top: 0;
        }

        .demand-low {
            background: #93c5fd;
        }

        .demand-medium {
            background: #3b82f6;
        }

        .demand-high {
            background: #fca5a5;
        }

        .demand-very-high {
            background: #ef4444;
        }

        .calendar-day-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #1e293b;
            color: #ffffff;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 11px;
            white-space: nowrap;
            margin-bottom: 4px;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: opacity 0.2s, visibility 0.2s;
            z-index: 10;
        }

        .calendar-day.has-data.show-tooltip .calendar-day-tooltip {
            opacity: 1;
            visibility: visible;
        }

        .calendar-day-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 4px solid transparent;
            border-top-color: #1e293b;
        }

        /* Notifications Drawer */
        .notifications-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 250;
            border-radius: 32px;
        }

        .notifications-overlay.open {
            display: block;
        }

        .notifications-drawer {
            position: absolute;
            bottom: -100%;
            left: 0;
            right: 0;
            background: #ffffff;
            border-top-left-radius: 24px;
            border-top-right-radius: 24px;
            max-height: 80%;
            transition: bottom 0.3s ease-out;
            z-index: 251;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
        }

        .notifications-drawer.open {
            bottom: 0;
        }

        .notifications-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #e2e8f0;
        }

        .notifications-title {
            font-size: 20px;
            font-weight: bold;
            color: #1e293b;
        }

        .notifications-close {
            width: 32px;
            height: 32px;
            border-radius: 16px;
            background: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #64748b;
        }

        .notifications-close:hover {
            background: #e2e8f0;
        }

        .notifications-list {
            flex: 1;
            overflow-y: auto;
            padding: 8px 0;
        }

        .notification-item {
            display: flex;
            padding: 16px 20px;
            border-bottom: 1px solid #f1f5f9;
            cursor: pointer;
            transition: background 0.2s;
        }

        .notification-item:hover {
            background: #f8fafc;
        }

        .notification-item.unread {
            background: #f0f9ff;
        }

        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .notification-icon.info {
            background: #dbeafe;
            color: #008FFF;
        }

        .notification-icon.warning {
            background: #fef3c7;
            color: #f59e0b;
        }

        .notification-icon.error {
            background: #fee2e2;
            color: #ef4444;
        }

        .notification-icon.success {
            background: #d1fae5;
            color: #10b981;
        }

        .notification-content {
            flex: 1;
            min-width: 0;
        }

        .notification-title {
            font-size: 15px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .notification-message {
            font-size: 13px;
            color: #64748b;
            line-height: 1.4;
            margin-bottom: 6px;
        }

        .notification-time {
            font-size: 11px;
            color: #94a3b8;
        }

        .notification-badge {
            width: 8px;
            height: 8px;
            border-radius: 4px;
            background: #008FFF;
            margin-left: 8px;
            flex-shrink: 0;
            margin-top: 6px;
        }

        /* Filter Section */
        .filter-section {
            background: #ffffff;
            padding: 8px 16px;
            margin: -16px -16px 16px -16px;
            display: flex;
            align-items: center;
            gap: 8px;
            overflow-x: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .filter-button {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 12px;
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
            color: #1e293b;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-button:hover {
            background: #e2e8f0;
            border-color: #cbd5e1;
        }

        .filter-button .material-icons {
            font-size: 18px;
            color: #64748b;
        }

        .filter-icon-button {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            flex-shrink: 0;
        }

        .filter-icon-button:hover {
            background: #f8fafc;
            border-color: #cbd5e1;
        }

        .filter-icon-button .material-icons {
            font-size: 20px;
            color: #64748b;
        }

        /* Filter Drawer */
        .filter-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 250;
            border-radius: 32px;
        }

        .filter-overlay.open {
            display: block;
        }

        .filter-drawer {
            position: absolute;
            bottom: -100%;
            left: 0;
            right: 0;
            background: #ffffff;
            border-top-left-radius: 24px;
            border-top-right-radius: 24px;
            max-height: 80%;
            transition: bottom 0.3s ease-out;
            z-index: 251;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
        }

        .filter-drawer.open {
            bottom: 0;
        }

        .filter-drawer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #e2e8f0;
        }

        .filter-drawer-title {
            font-size: 20px;
            font-weight: bold;
            color: #1e293b;
        }

        .filter-drawer-close {
            width: 32px;
            height: 32px;
            border-radius: 16px;
            background: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #64748b;
        }

        .filter-drawer-close:hover {
            background: #e2e8f0;
        }

        .filter-drawer-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .filter-option {
            padding: 16px 0;
            border-bottom: 1px solid #f1f5f9;
        }

        .filter-option:last-child {
            border-bottom: none;
        }

        .filter-option-label {
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 12px;
        }

        .filter-option-value {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            color: #64748b;
        }
    </style>
</head>
<body>
    <div class="phone-container">
        <div class="phone-screen">
            <!-- Header -->
            <div class="header">
                <div class="header-left">
                    <div class="hamburger-icon" onclick="toggleDrawer()">
                        <span class="material-icons">menu</span>
                    </div>
                    <div class="logo-text">Navigator</div>
                </div>
                <div class="right-actions">
                    <div class="hotel-selector">
                        <div class="hotel-info">
                            <div class="hotel-name">Ayodya Resort</div>
                        </div>
                        <span class="material-icons" style="color: #e0f2fe; font-size: 20px;">arrow_drop_down</span>
                    </div>
                    <div class="icon-button" onclick="toggleNotifications()">
                        <span class="material-icons" style="color: #e0f2fe; font-size: 24px;">notifications</span>
                        <div class="badge">3</div>
                    </div>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div class="page-loader" id="page-loader">
                <div class="loader-spinner"></div>
                <div class="loader-text">Loading...</div>
            </div>

            <!-- Content -->
            <div class="content" id="content">
                <!-- Overview Page -->
                <div id="overview-page">
                    <!-- Filter Section -->
                    <div class="filter-section">
                        <div class="filter-button">
                            <span class="material-icons">calendar_today</span>
                            <span>Next 7 Days</span>
                        </div>
                        <div class="filter-button">
                            <span class="material-icons">language</span>
                            <span>All Channels</span>
                        </div>
                        <div class="filter-icon-button" onclick="toggleFilters()">
                            <span class="material-icons">tune</span>
                        </div>
                    </div>

                    <div class="page-header">
                        <div class="page-title">Overview</div>
                        <div class="page-subtitle">Real-time insights for optimal pricing and revenue performance</div>
                    </div>

                    <!-- Insights Widget -->
                    <div class="insights-wrapper">
                        <div class="insights-gradient-border">
                            <div class="insights-content">
                                <div class="insights-title">Insights</div>
                                <div class="insights-list">
                                    <div class="insight-item">
                                        <div class="insight-dot"></div>
                                        <div class="insight-text">Based on demand, increase rate by 4%</div>
                                    </div>
                                    <div class="insight-item">
                                        <div class="insight-dot"></div>
                                        <div class="insight-text">Parity score below threshold, review competitor rates</div>
                                    </div>
                                    <div class="insight-item">
                                        <div class="insight-dot"></div>
                                        <div class="insight-text">High demand forecasted for next week, optimize pricing</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- KPI Cards -->
                    <div class="kpi-container">
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-title">Parity Score</div>
                            </div>
                            <div class="kpi-value" style="color: #1e293b;">87.5%</div>
                            <div class="kpi-variance negative">
                                <span class="material-icons variance-arrow">arrow_downward</span>
                                <span>100.0% vs Y'day</span>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-title">Avg. Daily Rate</div>
                            </div>
                            <div class="kpi-value" style="color: #1e293b;">$245.80</div>
                            <div class="kpi-variance positive">
                                <span class="material-icons variance-arrow">arrow_upward</span>
                                <span>1.1% vs Y'day</span>
                            </div>
                        </div>
                    </div>

                    <!-- Price Positioning - Full Width -->
                    <div class="kpi-card" style="width: 100%; margin-bottom: 24px;">
                        <div class="kpi-header">
                            <div class="kpi-title">Price Positioning</div>
                        </div>
                        <div class="kpi-value" style="color: #1e293b;">2nd</div>
                        <div class="kpi-variance positive">
                            <span class="material-icons variance-arrow">arrow_upward</span>
                            <span>0.0% vs Y'day</span>
                        </div>
                    </div>

                    <!-- Rate Trends -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-title">Rate Trends</div>
                            <div class="view-toggle">
                                <button class="view-toggle-button active" onclick="toggleRateView('table')" id="rate-table-btn">
                                    <span class="material-icons">table_chart</span>
                                </button>
                                <button class="view-toggle-button" onclick="toggleRateView('chart')" id="rate-chart-btn">
                                    <span class="material-icons">show_chart</span>
                                </button>
                            </div>
                        </div>
                        <div id="rate-trends-table" style="background: #ffffff; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); overflow: hidden;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: #ffffff; border-bottom: 1px solid #e2e8f0;">
                                        <th style="padding: 12px 16px; text-align: left; font-size: 12px; font-weight: 600; color: #64748b; text-transform: uppercase;">Date</th>
                                        <th style="padding: 12px 16px; text-align: right; font-size: 12px; font-weight: 600; color: #64748b; text-transform: uppercase;">My ADR</th>
                                        <th style="padding: 12px 16px; text-align: right; font-size: 12px; font-weight: 600; color: #64748b; text-transform: uppercase;">Comp. Avg.</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="border-bottom: 1px solid #f1f5f9;">
                                        <td style="padding: 12px 16px; font-size: 14px; color: #1e293b;">7 Jan, Mon</td>
                                        <td style="padding: 12px 16px; text-align: right; font-size: 14px; font-weight: 600; color: #1e293b;">$220</td>
                                        <td style="padding: 12px 16px; text-align: right; font-size: 14px; font-weight: 600; color: #ef4444;">$225</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #f1f5f9;">
                                        <td style="padding: 12px 16px; font-size: 14px; color: #1e293b;">8 Jan, Tue</td>
                                        <td style="padding: 12px 16px; text-align: right; font-size: 14px; font-weight: 600; color: #1e293b;">$235</td>
                                        <td style="padding: 12px 16px; text-align: right; font-size: 14px; font-weight: 600; color: #10b981;">$230</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #f1f5f9;">
                                        <td style="padding: 12px 16px; font-size: 14px; color: #1e293b;">9 Jan, Wed</td>
                                        <td style="padding: 12px 16px; text-align: right; font-size: 14px; font-weight: 600; color: #1e293b;">$245</td>
                                        <td style="padding: 12px 16px; text-align: right; font-size: 14px; font-weight: 600; color: #ef4444;">$250</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #f1f5f9;">
                                        <td style="padding: 12px 16px; font-size: 14px; color: #1e293b;">10 Jan, Thu</td>
                                        <td style="padding: 12px 16px; text-align: right; font-size: 14px; font-weight: 600; color: #1e293b;">$250</td>
                                        <td style="padding: 12px 16px; text-align: right; font-size: 14px; font-weight: 600; color: #10b981;">$245</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #f1f5f9;">
                                        <td style="padding: 12px 16px; font-size: 14px; color: #1e293b;">11 Jan, Fri</td>
                                        <td style="padding: 12px 16px; text-align: right; font-size: 14px; font-weight: 600; color: #1e293b;">$260</td>
                                        <td style="padding: 12px 16px; text-align: right; font-size: 14px; font-weight: 600; color: #ef4444;">$265</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #f1f5f9;">
                                        <td style="padding: 12px 16px; font-size: 14px; color: #1e293b;">12 Jan, Sat</td>
                                        <td style="padding: 12px 16px; text-align: right; font-size: 14px; font-weight: 600; color: #1e293b;">$280</td>
                                        <td style="padding: 12px 16px; text-align: right; font-size: 14px; font-weight: 600; color: #10b981;">$275</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 12px 16px; font-size: 14px; color: #1e293b;">13 Jan, Sun</td>
                                        <td style="padding: 12px 16px; text-align: right; font-size: 14px; font-weight: 600; color: #1e293b;">$275</td>
                                        <td style="padding: 12px 16px; text-align: right; font-size: 14px; font-weight: 600; color: #ef4444;">$280</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div id="rate-trends-chart" style="background: #ffffff; border-radius: 12px; padding: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: none; min-height: 280px;">
                            <canvas id="rateTrendsChart" style="height: 280px !important; max-height: 280px !important;"></canvas>
                        </div>
                    </div>

                    <!-- Property Health Score -->
                    <div class="section channel-section">
                        <div class="section-header">
                            <div>
                                <div class="section-title">Property Health Score</div>
                                <div class="channel-subtitle">Channel performance and parity monitoring</div>
                            </div>
                        </div>
                        <div class="channel-carousel" style="position: relative;">
                            <div class="channel-cards-container" id="channel-cards">
                                <!-- Channel cards will be populated by JavaScript -->
                            </div>
                            <div class="channel-dots" id="channel-dots">
                                <!-- Dots will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Market Demand -->
                    <div class="section channel-section">
                        <div class="section-header">
                            <div>
                                <div class="section-title">Market Demand</div>
                                <div style="font-size: 13px; color: #64748b; margin-top: 4px;">Current market performance indicators</div>
                            </div>
                        </div>
                        <div class="market-demand-carousel" style="position: relative;">
                            <div class="market-demand-cards-container" id="market-demand-cards">
                                <!-- Market Demand cards will be populated by JavaScript -->
                            </div>
                            <div class="market-demand-dots" id="market-demand-dots">
                                <!-- Dots will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Demand Page (Default page) -->
                <div id="demand-page" style="display: none;">
                    <!-- Filter Section -->
                    <div class="filter-section">
                        <div class="filter-button">
                            <span class="material-icons">calendar_today</span>
                            <span>Next 15 Days</span>
                        </div>
                        <div class="filter-button">
                            <span class="material-icons">language</span>
                            <span>Vs. WoW</span>
                        </div>
                    </div>

                    <div style="margin-top: 0;">
                        <div class="page-header">
                            <div class="page-title">Demand Forecast</div>
                            <div class="page-subtitle">Market demand forecasting and analysis</div>
                        </div>

                        <!-- Calendar -->
                        <div class="section">
                            <div class="calendar-container">
                                <div class="calendar-header">
                                    <div class="calendar-month">January 2026</div>
                                    <div class="calendar-nav">
                                        <button class="calendar-nav-btn" onclick="changeMonth(-1)">
                                            <span class="material-icons" style="font-size: 18px;">chevron_left</span>
                                        </button>
                                        <button class="calendar-nav-btn" onclick="changeMonth(1)">
                                            <span class="material-icons" style="font-size: 18px;">chevron_right</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="calendar-weekdays">
                                    <div class="calendar-weekday">Sun</div>
                                    <div class="calendar-weekday">Mon</div>
                                    <div class="calendar-weekday">Tue</div>
                                    <div class="calendar-weekday">Wed</div>
                                    <div class="calendar-weekday">Thu</div>
                                    <div class="calendar-weekday">Fri</div>
                                    <div class="calendar-weekday">Sat</div>
                                </div>
                                <div class="calendar-days" id="calendar-days">
                                    <!-- Calendar days will be generated by JavaScript -->
                                </div>
                                <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #e2e8f0; display: flex; flex-direction: column; gap: 12px;">
                                    <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap; justify-content: center;">
                                        <div style="display: flex; align-items: center; gap: 6px;">
                                            <div class="calendar-day-indicator demand-low"></div>
                                            <span style="font-size: 11px; color: #64748b;">Low</span>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 6px;">
                                            <div class="calendar-day-indicator demand-medium"></div>
                                            <span style="font-size: 11px; color: #64748b;">Normal</span>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 6px;">
                                            <div class="calendar-day-indicator demand-high"></div>
                                            <span style="font-size: 11px; color: #64748b;">High</span>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 6px;">
                                            <div class="calendar-day-indicator demand-very-high"></div>
                                            <span style="font-size: 11px; color: #64748b;">Very High</span>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 6px; justify-content: center;">
                                        <span class="material-icons" style="font-size: 16px; color: #fbbf24;">star</span>
                                        <span style="font-size: 11px; color: #64748b;">Events/Holidays</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Summary Cards -->
                        <div class="section">
                            <div class="section-title">Market Summary</div>
                            <div style="font-size: 13px; color: #64748b; margin-top: 4px; margin-bottom: 20px;">Key performance indicators and market positioning</div>
                            <div class="summary-grid">
                                <div class="summary-card">
                                    <div class="summary-header">
                                        <div class="summary-title">Demand Index</div>
                                    </div>
                                    <div class="summary-value" style="color: #1e293b;">78.5</div>
                                    <div class="summary-change" style="color: #10b981;">
                                        <span class="material-icons" style="font-size: 14px;">trending_up</span>
                                        <span>+6.2%</span>
                                    </div>
                                </div>

                                <div class="summary-card">
                                    <div class="summary-header">
                                        <div class="summary-title">Hotel ADR</div>
                                    </div>
                                    <div class="summary-value" style="color: #1e293b;">$245.80</div>
                                    <div class="summary-change" style="color: #10b981;">
                                        <span class="material-icons" style="font-size: 14px;">trending_up</span>
                                        <span>+3.5%</span>
                                    </div>
                                </div>

                                <div class="summary-card">
                                    <div class="summary-header">
                                        <div class="summary-title">RevPAR</div>
                                    </div>
                                    <div class="summary-value" style="color: #1e293b;">$193.15</div>
                                    <div class="summary-change" style="color: #10b981;">
                                        <span class="material-icons" style="font-size: 14px;">trending_up</span>
                                        <span>+4.8%</span>
                                    </div>
                                </div>

                                <div class="summary-card">
                                    <div class="summary-header">
                                        <div class="summary-title">Occupancy</div>
                                    </div>
                                    <div class="summary-value" style="color: #1e293b;">78.5%</div>
                                    <div class="summary-change" style="color: #10b981;">
                                        <span class="material-icons" style="font-size: 14px;">trending_up</span>
                                        <span>+2.1%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Demand Trends -->
                        <div class="section">
                            <div class="section-title">Demand Trends</div>
                            <div style="font-size: 13px; color: #64748b; margin-top: 4px; margin-bottom: 20px;">Demand forecast and pricing analysis</div>
                            <div style="background: #ffffff; border-radius: 12px; padding: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <canvas id="demandTrendsChart" style="max-height: 250px;"></canvas>
                            </div>
                        </div>

                        <!-- Events & Holidays -->
                        <div class="section">
                            <div class="section-title">Events & Holidays</div>
                            <div style="margin-top: 20px; background: #ffffff; border-radius: 12px; padding: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                <div style="display: flex; flex-direction: column; gap: 12px;">
                                    <div style="display: flex; align-items: center; padding-bottom: 12px; border-bottom: 1px solid #f1f5f9; gap: 12px;">
                                        <div style="width: 40px; height: 40px; border-radius: 8px; background: #f1f5f9; display: flex; align-items: center; justify-content: center;">
                                            <span class="material-icons" style="color: #ef4444; font-size: 20px;">celebration</span>
                                        </div>
                                        <div style="flex: 1;">
                                            <div style="font-size: 15px; font-weight: 600; color: #1e293b; margin-bottom: 4px;">New Year Celebration</div>
                                            <div style="font-size: 13px; color: #64748b;">Mon, 1 Jan '24</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; padding-bottom: 12px; border-bottom: 1px solid #f1f5f9; gap: 12px;">
                                        <div style="width: 40px; height: 40px; border-radius: 8px; background: #f1f5f9; display: flex; align-items: center; justify-content: center;">
                                            <span class="material-icons" style="color: #ef4444; font-size: 20px;">event</span>
                                        </div>
                                        <div style="flex: 1;">
                                            <div style="font-size: 15px; font-weight: 600; color: #1e293b; margin-bottom: 4px;">Business Conference</div>
                                            <div style="font-size: 13px; color: #64748b;">Mon, 15 Jan '24</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 40px; height: 40px; border-radius: 8px; background: #f1f5f9; display: flex; align-items: center; justify-content: center;">
                                            <span class="material-icons" style="color: #f59e0b; font-size: 20px;">event</span>
                                        </div>
                                        <div style="flex: 1;">
                                            <div style="font-size: 15px; font-weight: 600; color: #1e293b; margin-bottom: 4px;">Music Festival</div>
                                            <div style="font-size: 13px; color: #64748b;">Sat, 20 Jan '24</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Rate Trends Page (Default) -->
                <div id="rate-trends-page" style="display: none;">
                    <!-- Filter Section -->
                    <div class="filter-section">
                        <div class="filter-button">
                            <span class="material-icons">calendar_today</span>
                            <span>Next 7 Days</span>
                        </div>
                        <div class="filter-button">
                            <span class="material-icons">language</span>
                            <span>All Channels</span>
                        </div>
                        <div class="filter-icon-button" onclick="toggleFilters()">
                            <span class="material-icons">tune</span>
                        </div>
                    </div>

                    <div style="margin-top: 0;">
                        <div class="page-header">
                            <div class="page-title">Rate Trends</div>
                            <div class="page-subtitle">Rate trends and pricing analysis</div>
                        </div>

                        <!-- Insights Widget -->
                        <div class="insights-wrapper">
                            <div class="insights-gradient-border">
                                <div class="insights-content">
                                    <div class="insights-title">Insights</div>
                                    <div class="insights-list">
                                        <div class="insight-item">
                                            <div class="insight-dot"></div>
                                            <div class="insight-text">Your rate is $5 below competitor avg on 7 Jan - consider increasing by 2%</div>
                                        </div>
                                        <div class="insight-item">
                                            <div class="insight-dot"></div>
                                            <div class="insight-text">You're $5 above competitor avg on 8 Jan - maintain competitive advantage</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Rate Trends -->
                        <div class="section">
                            <div class="section-header">
                                <div class="section-title">Detailed Analysis</div>
                                <div style="display: flex; gap: 12px; align-items: center;">
                                    <div class="table-nav">
                                        <button class="table-nav-button" onclick="scrollRateTable('prev')" id="rate-table-prev-btn">
                                            <span class="material-icons" style="font-size: 18px; color: #64748b;">chevron_left</span>
                                        </button>
                                        <button class="table-nav-button" onclick="scrollRateTable('next')" id="rate-table-next-btn">
                                            <span class="material-icons" style="font-size: 18px; color: #64748b;">chevron_right</span>
                                        </button>
                                    </div>
                                    <div class="view-toggle">
                                        <button class="view-toggle-button active" onclick="toggleRateView('table')" id="rate-trends-page-table-btn">
                                            <span class="material-icons">table_chart</span>
                                        </button>
                                        <button class="view-toggle-button" onclick="toggleRateView('chart')" id="rate-trends-page-chart-btn">
                                            <span class="material-icons">show_chart</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div id="rate-trends-page-table" style="background: #ffffff; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); overflow-x: auto; overflow-y: hidden;">
                                <table id="rate-trends-table-content" style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="background: #ffffff; border-bottom: 1px solid #e2e8f0;">
                                            <th style="padding: 12px 16px; text-align: left; font-size: 12px; font-weight: 600; color: #64748b;">Date</th>
                                            <th style="padding: 12px 16px; text-align: right; font-size: 12px; font-weight: 600; color: #64748b;">My ADR</th>
                                            <th class="comp-col" data-comp="1" style="padding: 12px 16px; text-align: right; font-size: 12px; font-weight: 600; color: #64748b;">Comp 1</th>
                                            <th class="comp-col" data-comp="2" style="padding: 12px 16px; text-align: right; font-size: 12px; font-weight: 600; color: #64748b;">Comp 2</th>
                                            <th class="comp-col comp-col-hidden" data-comp="3" style="padding: 12px 16px; text-align: right; font-size: 12px; font-weight: 600; color: #64748b; display: none;">Comp 3</th>
                                            <th class="comp-col comp-col-hidden" data-comp="4" style="padding: 12px 16px; text-align: right; font-size: 12px; font-weight: 600; color: #64748b; display: none;">Comp 4</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="border-bottom: 1px solid #f1f5f9;">
                                            <td style="padding: 12px 16px;">
                                                <div style="font-size: 14px; color: #1e293b; font-weight: 500;">7 Jan</div>
                                                <div style="font-size: 12px; color: #64748b; margin-top: 2px;">Mon</div>
                                            </td>
                                            <td style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$220</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #10b981; margin-top: 3px; line-height: 14px;">-5</div>
                                            </td>
                                            <td class="comp-col" data-comp="1" style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$225</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+8</div>
                                            </td>
                                            <td class="comp-col" data-comp="2" style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$228</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+12</div>
                                            </td>
                                            <td class="comp-col comp-col-hidden" data-comp="3" style="padding: 12px 16px; text-align: right; display: none;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$218</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #10b981; margin-top: 3px; line-height: 14px;">-2</div>
                                            </td>
                                            <td class="comp-col comp-col-hidden" data-comp="4" style="padding: 12px 16px; text-align: right; display: none;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$230</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+15</div>
                                            </td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid #f1f5f9;">
                                            <td style="padding: 12px 16px;">
                                                <div style="font-size: 14px; color: #1e293b; font-weight: 500;">8 Jan</div>
                                                <div style="font-size: 12px; color: #64748b; margin-top: 2px;">Tue</div>
                                            </td>
                                            <td style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$235</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+15</div>
                                            </td>
                                            <td class="comp-col" data-comp="1" style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$230</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+5</div>
                                            </td>
                                            <td class="comp-col" data-comp="2" style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$232</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+7</div>
                                            </td>
                                            <td class="comp-col comp-col-hidden" data-comp="3" style="padding: 12px 16px; text-align: right; display: none;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$228</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #10b981; margin-top: 3px; line-height: 14px;">-7</div>
                                            </td>
                                            <td class="comp-col comp-col-hidden" data-comp="4" style="padding: 12px 16px; text-align: right; display: none;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$233</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+8</div>
                                            </td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid #f1f5f9;">
                                            <td style="padding: 12px 16px;">
                                                <div style="font-size: 14px; color: #1e293b; font-weight: 500;">9 Jan</div>
                                                <div style="font-size: 12px; color: #64748b; margin-top: 2px;">Wed</div>
                                            </td>
                                            <td style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$245</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+10</div>
                                            </td>
                                            <td class="comp-col" data-comp="1" style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$250</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+20</div>
                                            </td>
                                            <td class="comp-col" data-comp="2" style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$252</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+22</div>
                                            </td>
                                            <td class="comp-col comp-col-hidden" data-comp="3" style="padding: 12px 16px; text-align: right; display: none;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$243</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #10b981; margin-top: 3px; line-height: 14px;">-2</div>
                                            </td>
                                            <td class="comp-col comp-col-hidden" data-comp="4" style="padding: 12px 16px; text-align: right; display: none;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$255</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+25</div>
                                            </td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid #f1f5f9;">
                                            <td style="padding: 12px 16px;">
                                                <div style="font-size: 14px; color: #1e293b; font-weight: 500;">10 Jan</div>
                                                <div style="font-size: 12px; color: #64748b; margin-top: 2px;">Thu</div>
                                            </td>
                                            <td style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$250</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+5</div>
                                            </td>
                                            <td class="comp-col" data-comp="1" style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$245</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #10b981; margin-top: 3px; line-height: 14px;">-5</div>
                                            </td>
                                            <td class="comp-col" data-comp="2" style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$248</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+3</div>
                                            </td>
                                            <td class="comp-col comp-col-hidden" data-comp="3" style="padding: 12px 16px; text-align: right; display: none;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$242</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #10b981; margin-top: 3px; line-height: 14px;">-8</div>
                                            </td>
                                            <td class="comp-col comp-col-hidden" data-comp="4" style="padding: 12px 16px; text-align: right; display: none;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$247</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+2</div>
                                            </td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid #f1f5f9;">
                                            <td style="padding: 12px 16px;">
                                                <div style="font-size: 14px; color: #1e293b; font-weight: 500;">11 Jan</div>
                                                <div style="font-size: 12px; color: #64748b; margin-top: 2px;">Fri</div>
                                            </td>
                                            <td style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$260</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+10</div>
                                            </td>
                                            <td class="comp-col" data-comp="1" style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$265</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+20</div>
                                            </td>
                                            <td class="comp-col" data-comp="2" style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$268</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+23</div>
                                            </td>
                                            <td class="comp-col comp-col-hidden" data-comp="3" style="padding: 12px 16px; text-align: right; display: none;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$258</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #10b981; margin-top: 3px; line-height: 14px;">-2</div>
                                            </td>
                                            <td class="comp-col comp-col-hidden" data-comp="4" style="padding: 12px 16px; text-align: right; display: none;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$270</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+25</div>
                                            </td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid #f1f5f9;">
                                            <td style="padding: 12px 16px;">
                                                <div style="font-size: 14px; color: #1e293b; font-weight: 500;">12 Jan</div>
                                                <div style="font-size: 12px; color: #64748b; margin-top: 2px;">Sat</div>
                                            </td>
                                            <td style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$280</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+20</div>
                                            </td>
                                            <td class="comp-col" data-comp="1" style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$275</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+10</div>
                                            </td>
                                            <td class="comp-col" data-comp="2" style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$278</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+13</div>
                                            </td>
                                            <td class="comp-col comp-col-hidden" data-comp="3" style="padding: 12px 16px; text-align: right; display: none;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$272</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #10b981; margin-top: 3px; line-height: 14px;">-8</div>
                                            </td>
                                            <td class="comp-col comp-col-hidden" data-comp="4" style="padding: 12px 16px; text-align: right; display: none;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$277</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+12</div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 12px 16px;">
                                                <div style="font-size: 14px; color: #1e293b; font-weight: 500;">13 Jan</div>
                                                <div style="font-size: 12px; color: #64748b; margin-top: 2px;">Sun</div>
                                            </td>
                                            <td style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$275</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #10b981; margin-top: 3px; line-height: 14px;">-5</div>
                                            </td>
                                            <td class="comp-col" data-comp="1" style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$280</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+5</div>
                                            </td>
                                            <td class="comp-col" data-comp="2" style="padding: 12px 16px; text-align: right;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$282</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+7</div>
                                            </td>
                                            <td class="comp-col comp-col-hidden" data-comp="3" style="padding: 12px 16px; text-align: right; display: none;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$270</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #10b981; margin-top: 3px; line-height: 14px;">-5</div>
                                            </td>
                                            <td class="comp-col comp-col-hidden" data-comp="4" style="padding: 12px 16px; text-align: right; display: none;">
                                                <div style="font-size: 14px; font-weight: 600; color: #1e293b;">$285</div>
                                                <div style="font-size: 11px; font-weight: 500; color: #ef4444; margin-top: 3px; line-height: 14px;">+10</div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="rate-trends-page-chart" style="background: #ffffff; border-radius: 12px; padding: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: none; min-height: 280px;">
                                <canvas id="rateTrendsPageChart" style="height: 280px !important; max-height: 280px !important;"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Issues Badge - Fixed at bottom left -->
            <div class="issues-badge" onclick="toggleIssues()">
                <div class="issues-icon">N</div>
                <div class="issues-text">17 Issues</div>
            </div>

            <!-- Filter Drawer -->
            <div class="filter-overlay" id="filter-overlay" onclick="toggleFilters()"></div>
            <div class="filter-drawer" id="filter-drawer">
                <div class="filter-drawer-header">
                    <div class="filter-drawer-title">Filters</div>
                    <div class="filter-drawer-close" onclick="toggleFilters()">
                        <span class="material-icons" style="font-size: 20px;">close</span>
                    </div>
                </div>
                <div class="filter-drawer-content">
                    <div class="filter-option">
                        <div class="filter-option-label">Comparison</div>
                        <div class="filter-option-value">
                            <span class="material-icons" style="font-size: 18px;">calendar_today</span>
                            <span>Vs. Yesterday</span>
                            <span class="material-icons" style="font-size: 18px; margin-left: auto;">arrow_drop_down</span>
                        </div>
                    </div>
                    <div class="filter-option">
                        <div class="filter-option-label">Primary</div>
                        <div class="filter-option-value">
                            <span class="material-icons" style="font-size: 18px;">people</span>
                            <span>Primary</span>
                            <span class="material-icons" style="font-size: 18px; margin-left: auto;">arrow_drop_down</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notifications Drawer -->
            <div class="notifications-overlay" id="notifications-overlay" onclick="toggleNotifications()"></div>
            <div class="notifications-drawer" id="notifications-drawer">
                <div class="notifications-header">
                    <div class="notifications-title">Notifications</div>
                    <div class="notifications-close" onclick="toggleNotifications()">
                        <span class="material-icons" style="font-size: 20px;">close</span>
                    </div>
                </div>
                <div class="notifications-list" id="notifications-list">
                    <!-- Notifications will be populated by JavaScript -->
                </div>
            </div>

            <!-- Navigation Drawer -->
            <div class="drawer-overlay" id="drawer-overlay" onclick="toggleDrawer()"></div>
            <div class="drawer" id="drawer">
                <div style="padding: 16px; flex: 1; display: flex; flex-direction: column;">
                    <div style="margin-bottom: 24px;">
                        <div style="margin-bottom: 12px; padding: 0 16px;">
                            <div style="font-size: 11px; font-weight: 600; color: #64748b; text-transform: uppercase; letter-spacing: 1px; text-align: left;">Revenue Management</div>
                        </div>
                        <div class="nav-item active" onclick="showPage('overview'); closeDrawer();">
                            <span class="material-icons nav-icon">home</span>
                            <div class="nav-item-text">Overview</div>
                        </div>
                        <div class="nav-item" onclick="showPage('demand'); closeDrawer();">
                            <span class="material-icons nav-icon">bar_chart</span>
                            <div class="nav-item-text">Demand Forecast</div>
                        </div>
                        <div class="nav-item" onclick="showPage('rate-trends'); closeDrawer();">
                            <span class="material-icons nav-icon">trending_up</span>
                            <div class="nav-item-text">Rate Trends</div>
                        </div>
                    </div>

                    <div style="margin-top: auto;">
                        <div style="margin-bottom: 12px; padding: 0 16px;">
                            <div style="font-size: 11px; font-weight: 600; color: #64748b; text-transform: uppercase; letter-spacing: 1px; text-align: left;">Support</div>
                        </div>
                        <div class="nav-item" onclick="closeDrawer()">
                            <span class="material-icons nav-icon">settings</span>
                            <div class="nav-item-text">Settings</div>
                        </div>
                        <div class="nav-item" onclick="closeDrawer()">
                            <span class="material-icons nav-icon">help</span>
                            <div class="nav-item-text">Help & Support</div>
                        </div>
                        <div class="nav-item" onclick="closeDrawer()">
                            <span class="material-icons nav-icon">logout</span>
                            <div class="nav-item-text">Logout</div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // Static data
        const demandData = {
            wow: {
                summary: [
                    { id: 'demand-index', value: '78.5', change: '+6.2%' },
                    { id: 'hotel-adr', value: '$245.80', change: '+3.5%' },
                    { id: 'revpar', value: '$193.15', change: '+4.8%' },
                    { id: 'occupancy', value: '78.5%', change: '+2.1%' }
                ]
            },
            mom: {
                summary: [
                    { id: 'demand-index', value: '78.5', change: '+12.4%' },
                    { id: 'hotel-adr', value: '$245.80', change: '+8.2%' },
                    { id: 'revpar', value: '$193.15', change: '+10.5%' },
                    { id: 'occupancy', value: '78.5%', change: '+5.3%' }
                ]
            },
            yoy: {
                summary: [
                    { id: 'demand-index', value: '78.5', change: '+15.8%' },
                    { id: 'hotel-adr', value: '$245.80', change: '+12.6%' },
                    { id: 'revpar', value: '$193.15', change: '+18.2%' },
                    { id: 'occupancy', value: '78.5%', change: '+4.9%' }
                ]
            }
        };

        // Calendar data - extended for multiple months
        const calendarData = {
            // January 2024
            '2024-01-01': { demand: 65, occupancy: 62 },
            '2024-01-02': { demand: 68, occupancy: 65 },
            '2024-01-03': { demand: 70, occupancy: 68 },
            '2024-01-04': { demand: 72, occupancy: 70 },
            '2024-01-05': { demand: 74, occupancy: 72 },
            '2024-01-06': { demand: 76, occupancy: 74 },
            '2024-01-07': { demand: 73, occupancy: 71 },
            '2024-01-08': { demand: 71, occupancy: 69 },
            '2024-01-09': { demand: 73, occupancy: 71 },
            '2024-01-10': { demand: 75, occupancy: 73 },
            '2024-01-11': { demand: 77, occupancy: 75 },
            '2024-01-12': { demand: 79, occupancy: 77 },
            '2024-01-13': { demand: 81, occupancy: 79 },
            '2024-01-14': { demand: 78, occupancy: 76 },
            '2024-01-15': { demand: 75, occupancy: 72 },
            '2024-01-16': { demand: 78, occupancy: 75 },
            '2024-01-17': { demand: 82, occupancy: 78 },
            '2024-01-18': { demand: 85, occupancy: 80 },
            '2024-01-19': { demand: 88, occupancy: 85 },
            '2024-01-20': { demand: 92, occupancy: 88 },
            '2024-01-21': { demand: 90, occupancy: 87 },
            '2024-01-22': { demand: 85, occupancy: 82 },
            '2024-01-23': { demand: 80, occupancy: 78 },
            '2024-01-24': { demand: 78, occupancy: 75 },
            '2024-01-25': { demand: 82, occupancy: 80 },
            '2024-01-26': { demand: 88, occupancy: 85 },
            '2024-01-27': { demand: 90, occupancy: 88 },
            '2024-01-28': { demand: 85, occupancy: 82 },
            '2024-01-29': { demand: 83, occupancy: 80 },
            '2024-01-30': { demand: 81, occupancy: 78 },
            '2024-01-31': { demand: 79, occupancy: 76 },
            // February 2024
            '2024-02-01': { demand: 72, occupancy: 70 },
            '2024-02-02': { demand: 74, occupancy: 72 },
            '2024-02-03': { demand: 76, occupancy: 74 },
            '2024-02-04': { demand: 78, occupancy: 76 },
            '2024-02-05': { demand: 80, occupancy: 78 },
            '2024-02-06': { demand: 82, occupancy: 80 },
            '2024-02-07': { demand: 79, occupancy: 77 },
            '2024-02-08': { demand: 77, occupancy: 75 },
            '2024-02-09': { demand: 79, occupancy: 77 },
            '2024-02-10': { demand: 81, occupancy: 79 },
            '2024-02-11': { demand: 83, occupancy: 81 },
            '2024-02-12': { demand: 85, occupancy: 83 },
            '2024-02-13': { demand: 87, occupancy: 85 },
            '2024-02-14': { demand: 89, occupancy: 87 },
            '2024-02-15': { demand: 86, occupancy: 84 },
            '2024-02-16': { demand: 84, occupancy: 82 },
            '2024-02-17': { demand: 86, occupancy: 84 },
            '2024-02-18': { demand: 88, occupancy: 86 },
            '2024-02-19': { demand: 90, occupancy: 88 },
            '2024-02-20': { demand: 92, occupancy: 90 },
            '2024-02-21': { demand: 89, occupancy: 87 },
            '2024-02-22': { demand: 87, occupancy: 85 },
            '2024-02-23': { demand: 85, occupancy: 83 },
            '2024-02-24': { demand: 83, occupancy: 81 },
            '2024-02-25': { demand: 85, occupancy: 83 },
            '2024-02-26': { demand: 87, occupancy: 85 },
            '2024-02-27': { demand: 89, occupancy: 87 },
            '2024-02-28': { demand: 86, occupancy: 84 },
            '2024-02-29': { demand: 84, occupancy: 82 },
            // March 2024
            '2024-03-01': { demand: 75, occupancy: 73 },
            '2024-03-02': { demand: 77, occupancy: 75 },
            '2024-03-03': { demand: 79, occupancy: 77 },
            '2024-03-04': { demand: 81, occupancy: 79 },
            '2024-03-05': { demand: 83, occupancy: 81 },
            '2024-03-06': { demand: 85, occupancy: 83 },
            '2024-03-07': { demand: 82, occupancy: 80 },
            '2024-03-08': { demand: 80, occupancy: 78 },
            '2024-03-09': { demand: 82, occupancy: 80 },
            '2024-03-10': { demand: 84, occupancy: 82 },
            '2024-03-11': { demand: 86, occupancy: 84 },
            '2024-03-12': { demand: 88, occupancy: 86 },
            '2024-03-13': { demand: 90, occupancy: 88 },
            '2024-03-14': { demand: 87, occupancy: 85 },
            '2024-03-15': { demand: 85, occupancy: 83 },
            '2024-03-16': { demand: 87, occupancy: 85 },
            '2024-03-17': { demand: 89, occupancy: 87 },
            '2024-03-18': { demand: 91, occupancy: 89 },
            '2024-03-19': { demand: 93, occupancy: 91 },
            '2024-03-20': { demand: 90, occupancy: 88 },
            '2024-03-21': { demand: 88, occupancy: 86 },
            '2024-03-22': { demand: 86, occupancy: 84 },
            '2024-03-23': { demand: 84, occupancy: 82 },
            '2024-03-24': { demand: 86, occupancy: 84 },
            '2024-03-25': { demand: 88, occupancy: 86 },
            '2024-03-26': { demand: 90, occupancy: 88 },
            '2024-03-27': { demand: 92, occupancy: 90 },
            '2024-03-28': { demand: 89, occupancy: 87 },
            '2024-03-29': { demand: 87, occupancy: 85 },
            '2024-03-30': { demand: 85, occupancy: 83 },
            '2024-03-31': { demand: 83, occupancy: 81 }
        };

        let currentYear = 2026;
        let currentMonth = 0; // 0 = January

        let currentFilter = 'wow';

        function toggleDrawer() {
            const drawer = document.getElementById('drawer');
            const overlay = document.getElementById('drawer-overlay');
            drawer.classList.toggle('open');
            overlay.classList.toggle('open');
        }

        function closeDrawer() {
            const drawer = document.getElementById('drawer');
            const overlay = document.getElementById('drawer-overlay');
            drawer.classList.remove('open');
            overlay.classList.remove('open');
        }

        function toggleIssues() {
            // Toggle issues visibility or navigate to issues page
            alert('17 Issues - Click to view details');
        }

        // Notifications data
        const notificationsData = [
            {
                id: '1',
                type: 'warning',
                icon: 'warning',
                title: 'Rate Parity Alert',
                message: 'Rate parity mismatch detected for Hotel ABC on Booking.com',
                time: '2 minutes ago',
                unread: true
            },
            {
                id: '2',
                type: 'info',
                icon: 'info',
                title: 'Demand Forecast Update',
                message: 'High demand expected for January 20-25. Consider adjusting rates.',
                time: '15 minutes ago',
                unread: true
            },
            {
                id: '3',
                type: 'error',
                icon: 'error',
                title: 'OTA Ranking Drop',
                message: 'Hotel ranking dropped to 5th position on Expedia. Action required.',
                time: '1 hour ago',
                unread: true
            },
            {
                id: '4',
                type: 'success',
                icon: 'check_circle',
                title: 'Price Optimization Complete',
                message: 'Automated price adjustment completed for 15 properties.',
                time: '2 hours ago',
                unread: false
            },
            {
                id: '5',
                type: 'info',
                icon: 'event',
                title: 'Event Detected',
                message: 'Music Festival detected for Jan 20. High demand expected.',
                time: '3 hours ago',
                unread: false
            },
            {
                id: '6',
                type: 'warning',
                icon: 'trending_down',
                title: 'Occupancy Alert',
                message: 'Occupancy below target for next week. Review pricing strategy.',
                time: '5 hours ago',
                unread: false
            }
        ];

        function toggleFilters() {
            const overlay = document.getElementById('filter-overlay');
            const drawer = document.getElementById('filter-drawer');
            
            overlay.classList.toggle('open');
            drawer.classList.toggle('open');
        }

        let currentCompView = 1; // 1 = showing COMP 1-2, 2 = showing COMP 3-5

        function scrollRateTable(direction) {
            const compCols = document.querySelectorAll('.comp-col');
            const prevBtn = document.getElementById('rate-table-prev-btn');
            const nextBtn = document.getElementById('rate-table-next-btn');
            
            if (direction === 'next' && currentCompView === 1) {
                // Hide COMP 1-2, Show COMP 3-5
                compCols.forEach(col => {
                    const compNum = parseInt(col.getAttribute('data-comp'));
                    if (compNum <= 2) {
                        col.style.display = 'none';
                    } else {
                        col.style.display = '';
                    }
                });
                currentCompView = 2;
            } else if (direction === 'prev' && currentCompView === 2) {
                // Show COMP 1-2, Hide COMP 3-5
                compCols.forEach(col => {
                    const compNum = parseInt(col.getAttribute('data-comp'));
                    if (compNum <= 2) {
                        col.style.display = '';
                    } else {
                        col.style.display = 'none';
                    }
                });
                currentCompView = 1;
            }
            
            // Update button states
            updateTableNavButtons();
        }

        function updateTableNavButtons() {
            const prevBtn = document.getElementById('rate-table-prev-btn');
            const nextBtn = document.getElementById('rate-table-next-btn');
            
            if (prevBtn && nextBtn) {
                prevBtn.disabled = currentCompView === 1;
                nextBtn.disabled = currentCompView === 2;
                prevBtn.style.opacity = currentCompView === 1 ? '0.3' : '1';
                nextBtn.style.opacity = currentCompView === 2 ? '0.3' : '1';
                prevBtn.style.cursor = currentCompView === 1 ? 'not-allowed' : 'pointer';
                nextBtn.style.cursor = currentCompView === 2 ? 'not-allowed' : 'pointer';
            }
        }

        // Initialize competitor columns on page load
        function initCompetitorColumns() {
            const compCols = document.querySelectorAll('.comp-col');
            compCols.forEach(col => {
                const compNum = parseInt(col.getAttribute('data-comp'));
                if (compNum <= 2) {
                    col.style.display = '';
                } else {
                    col.style.display = 'none';
                }
            });
            currentCompView = 1;
            updateTableNavButtons();
        }

        function toggleRateView(view) {
            // Handle overview page rate trends
            const tableView = document.getElementById('rate-trends-table');
            const chartView = document.getElementById('rate-trends-chart');
            const tableBtn = document.getElementById('rate-table-btn');
            const chartBtn = document.getElementById('rate-chart-btn');
            
            // Handle rate trends page
            const pageTableView = document.getElementById('rate-trends-page-table');
            const pageChartView = document.getElementById('rate-trends-page-chart');
            const pageTableBtn = document.getElementById('rate-trends-page-table-btn');
            const pageChartBtn = document.getElementById('rate-trends-page-chart-btn');
            
            if (view === 'table') {
                if (tableView) {
                    tableView.style.display = 'block';
                    chartView.style.display = 'none';
                    tableBtn.classList.add('active');
                    chartBtn.classList.remove('active');
                }
                if (pageTableView) {
                    pageTableView.style.display = 'block';
                    pageChartView.style.display = 'none';
                    pageTableBtn.classList.add('active');
                    pageChartBtn.classList.remove('active');
                    // Update navigation buttons when showing table
                    setTimeout(() => {
                        updateTableNavButtons();
                    }, 100);
                }
            } else {
                if (tableView) {
                    tableView.style.display = 'none';
                    chartView.style.display = 'block';
                    tableBtn.classList.remove('active');
                    chartBtn.classList.add('active');
                    
                    // Initialize chart if not already initialized
                    if (typeof rateTrendsChart === 'undefined' || rateTrendsChart === null) {
                        initCharts();
                    }
                }
                if (pageTableView) {
                    pageTableView.style.display = 'none';
                    pageChartView.style.display = 'block';
                    pageTableBtn.classList.remove('active');
                    pageChartBtn.classList.add('active');
                    
                    // Initialize rate trends page chart
                    initRateTrendsPageChart();
                }
            }
        }

        function toggleNotifications() {
            const overlay = document.getElementById('notifications-overlay');
            const drawer = document.getElementById('notifications-drawer');
            
            overlay.classList.toggle('open');
            drawer.classList.toggle('open');
            
            if (drawer.classList.contains('open')) {
                renderNotifications();
            }
        }

        function renderNotifications() {
            const list = document.getElementById('notifications-list');
            list.innerHTML = '';
            
            notificationsData.forEach(notification => {
                const item = document.createElement('div');
                item.className = `notification-item ${notification.unread ? 'unread' : ''}`;
                
                const iconMap = {
                    'warning': 'warning',
                    'info': 'info',
                    'error': 'error',
                    'success': 'check_circle'
                };
                
                item.innerHTML = `
                    <div class="notification-icon ${notification.type}">
                        <span class="material-icons" style="font-size: 20px;">${iconMap[notification.type] || 'info'}</span>
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">${notification.title}</div>
                        <div class="notification-message">${notification.message}</div>
                        <div class="notification-time">${notification.time}</div>
                    </div>
                    ${notification.unread ? '<div class="notification-badge"></div>' : ''}
                `;
                
                list.appendChild(item);
            });
        }

        function showPage(page) {
            const loader = document.getElementById('page-loader');
            const overviewPage = document.getElementById('overview-page');
            const demandPage = document.getElementById('demand-page');
            const rateTrendsPage = document.getElementById('rate-trends-page');
            
            // Get current active page
            let currentPage = 'overview';
            if (demandPage && demandPage.style.display === 'block') currentPage = 'demand';
            if (rateTrendsPage && rateTrendsPage.style.display === 'block') currentPage = 'rate-trends';
            
            // Only show loader if switching to a different page
            if (currentPage !== page) {
                // Show loading indicator
                loader.classList.add('show');
                
                // Hide all pages immediately
                overviewPage.style.display = 'none';
                demandPage.style.display = 'none';
                rateTrendsPage.style.display = 'none';
                
                // After a short delay, show the new page and hide loader
                setTimeout(() => {
                    overviewPage.style.display = page === 'overview' ? 'block' : 'none';
                    demandPage.style.display = page === 'demand' ? 'block' : 'none';
                    rateTrendsPage.style.display = page === 'rate-trends' ? 'block' : 'none';
                    
                    // Hide loading indicator
                    loader.classList.remove('show');
                    
                    // Update active nav items based on page
                    document.querySelectorAll('.nav-item').forEach(item => {
                        item.classList.remove('active');
                        const navText = item.querySelector('.nav-item-text');
                        if (navText) {
                            if (page === 'overview' && navText.textContent === 'Overview') {
                                item.classList.add('active');
                            } else if (page === 'demand' && navText.textContent === 'Demand Forecast') {
                                item.classList.add('active');
                            } else if (page === 'rate-trends' && navText.textContent === 'Rate Trends') {
                                item.classList.add('active');
                            }
                        }
                    });
                    
                    // Initialize competitor columns if showing rate trends
                    if (page === 'rate-trends') {
                        initCompetitorColumns();
                    }
                    
                    // Re-render channels and market demand if showing overview
                    if (page === 'overview') {
                        setTimeout(() => {
                            renderChannels();
                            renderMarketDemand();
                        }, 100);
                    }
                    
                    // Render calendar if showing demand page
                    if (page === 'demand') {
                        setTimeout(() => {
                            renderCalendar();
                        }, 100);
                    }
                    
                    // Initialize rate trends chart if showing rate trends page
                    if (page === 'rate-trends') {
                        setTimeout(() => {
                            initRateTrendsPageChart();
                        }, 100);
                    }
                }, 300); // 300ms loading delay
            } else {
                // Same page, no loading needed
                overviewPage.style.display = page === 'overview' ? 'block' : 'none';
                demandPage.style.display = page === 'demand' ? 'block' : 'none';
                rateTrendsPage.style.display = page === 'rate-trends' ? 'block' : 'none';
                
                // Update active nav items based on page
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                    const navText = item.querySelector('.nav-item-text');
                    if (navText) {
                        if (page === 'overview' && navText.textContent === 'Overview') {
                            item.classList.add('active');
                        } else if (page === 'demand' && navText.textContent === 'Demand Forecast') {
                            item.classList.add('active');
                        } else if (page === 'rate-trends' && navText.textContent === 'Rate Trends') {
                            item.classList.add('active');
                        }
                    }
                });
                
                // Render calendar if showing demand page
                if (page === 'demand') {
                    setTimeout(() => {
                        renderCalendar();
                    }, 100);
                }
            }
            
            // Don't auto-close drawer here - let menu items handle it
        }

        function setFilter(filter) {
            currentFilter = filter;
            
            // Update filter buttons
            document.querySelectorAll('.filter-button').forEach(btn => {
                btn.classList.remove('active');
                if ((filter === 'wow' && btn.textContent === 'WoW') ||
                    (filter === 'mom' && btn.textContent === 'MoM') ||
                    (filter === 'yoy' && btn.textContent === 'YoY')) {
                    btn.classList.add('active');
                }
            });
            
            // Update summary cards
            const data = demandData[filter].summary;
            const cards = document.querySelectorAll('#demand-page .summary-card');
            cards.forEach((card, index) => {
                if (data[index]) {
                    const valueEl = card.querySelector('.summary-value');
                    const changeEl = card.querySelector('.summary-change span:last-child');
                    if (valueEl) valueEl.textContent = data[index].value;
                    if (changeEl) changeEl.textContent = data[index].change;
                }
            });
        }

        // Initialize charts
        let rateTrendsChart, demandTrendsChart, marketDemandChart, rateTrendsPageChart;

        function initCharts() {
            // Rate Trends Chart
            const rateCtx = document.getElementById('rateTrendsChart');
            if (rateCtx) {
                rateTrendsChart = new Chart(rateCtx, {
                    type: 'line',
                    data: {
                        labels: [
                            ['7', 'Jan'],
                            ['8', 'Jan'],
                            ['9', 'Jan'],
                            ['10', 'Jan'],
                            ['11', 'Jan'],
                            ['12', 'Jan'],
                            ['13', 'Jan']
                        ],
                        datasets: [
                            {
                                label: 'My ADR',
                                data: [220, 235, 245, 250, 260, 280, 275],
                                borderColor: '#008FFF',
                                backgroundColor: 'transparent',
                                borderWidth: 3,
                                fill: false,
                                tension: 0.4,
                                pointRadius: 0,
                                pointHoverRadius: 6,
                                pointHoverBorderWidth: 2,
                                pointBackgroundColor: '#008FFF',
                                pointBorderColor: '#ffffff',
                                pointHoverBackgroundColor: '#008FFF',
                                pointHoverBorderColor: '#ffffff'
                            },
                            {
                                label: 'Comp. Avg.',
                                data: [225, 230, 250, 245, 265, 275, 280],
                                borderColor: '#f59e0b',
                                backgroundColor: 'rgba(245, 158, 11, 0.2)',
                                borderWidth: 3,
                                fill: true,
                                tension: 0.4,
                                pointRadius: 0,
                                pointHoverRadius: 6,
                                pointHoverBorderWidth: 2,
                                pointBackgroundColor: '#f59e0b',
                                pointBorderColor: '#ffffff',
                                pointHoverBackgroundColor: '#f59e0b',
                                pointHoverBorderColor: '#ffffff'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        },
                        onHover: (event, activeElements) => {
                            event.native.target.style.cursor = 'default';
                        },
                        onClick: (event, activeElements, chart) => {
                            if (activeElements.length > 0) {
                                // Show points for the clicked data point
                                const clickedIndex = activeElements[0].index;
                                
                                // Update point radius for clicked point
                                chart.data.datasets.forEach((dataset) => {
                                    const pointRadiusArray = new Array(dataset.data.length).fill(0);
                                    pointRadiusArray[clickedIndex] = 6;
                                    dataset.pointRadius = pointRadiusArray;
                                });
                                chart.update('none');
                            } else {
                                // Hide points and tooltip when clicking outside
                                chart.setActiveElements([]);
                                chart.tooltip.setActiveElements([], {x: 0, y: 0});
                                chart.data.datasets.forEach((dataset) => {
                                    dataset.pointRadius = 0;
                                });
                                chart.update('none');
                            }
                        },
                        events: ['click', 'touchstart'],
                        plugins: {
                            legend: {
                                display: true,
                                position: 'bottom',
                                align: 'center',
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: 'circle',
                                    padding: 15,
                                    font: {
                                        size: 12,
                                        weight: '400'
                                    },
                                    color: '#64748b',
                                    boxWidth: 5,
                                    boxHeight: 5,
                                    generateLabels: function(chart) {
                                        const original = Chart.defaults.plugins.legend.labels.generateLabels;
                                        const labels = original.call(this, chart);
                                        labels.forEach((label, index) => {
                                            if (index === 0) {
                                                label.text = 'My ADR';
                                                label.fillStyle = '#008FFF';
                                                label.strokeStyle = '#008FFF';
                                            } else if (index === 1) {
                                                label.text = 'Compset Average';
                                                label.fillStyle = '#f59e0b';
                                                label.strokeStyle = '#f59e0b';
                                            }
                                        });
                                        return labels;
                                    }
                                }
                            },
                            tooltip: {
                                enabled: true,
                                backgroundColor: '#1e293b',
                                padding: 12,
                                titleFont: {
                                    size: 14,
                                    weight: 'bold'
                                },
                                bodyFont: {
                                    size: 13
                                },
                                displayColors: false,
                                callbacks: {
                                    title: function(context) {
                                        const dataIndex = context[0].dataIndex;
                                        const chart = context[0].chart;
                                        const label = chart.data.labels[dataIndex];
                                        if (Array.isArray(label)) {
                                            return label[0] + ' ' + label[1];
                                        }
                                        // If it's already a string with comma, remove it
                                        if (typeof label === 'string' && label.includes(',')) {
                                            return label.replace(',', '');
                                        }
                                        return label;
                                    },
                                    label: function(context) {
                                        return context.dataset.label + ': $' + context.parsed.y;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                display: true,
                                beginAtZero: false,
                                min: 200,
                                max: 300,
                                grid: {
                                    color: '#f1f5f9',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: '#64748b',
                                    font: {
                                        size: 11
                                    },
                                    stepSize: 25,
                                    maxTicksLimit: 5,
                                    callback: function(value, index, ticks) {
                                        // Show only 3 specific values
                                        const showValues = [200, 250, 300];
                                        if (showValues.includes(value)) {
                                            return value;
                                        }
                                        return '';
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    color: '#64748b',
                                    font: {
                                        size: 11
                                    },
                                    maxRotation: 0
                                }
                            }
                        }
                    }
                });
                
                // Add click outside handler to hide tooltip and dots
                document.addEventListener('click', function(event) {
                    if (rateTrendsChart) {
                        const chartContainer = document.getElementById('rate-trends-chart');
                        const canvas = document.getElementById('rateTrendsChart');
                        if (chartContainer && canvas && !chartContainer.contains(event.target) && event.target !== canvas) {
                            // Clicked outside chart - hide tooltip and points
                            rateTrendsChart.setActiveElements([]);
                            rateTrendsChart.tooltip.setActiveElements([], {x: 0, y: 0});
                            rateTrendsChart.data.datasets.forEach((dataset) => {
                                dataset.pointRadius = 0;
                            });
                            rateTrendsChart.update('none');
                        }
                    }
                });
            }

            // Demand Trends Chart
            const demandCtx = document.getElementById('demandTrendsChart');
            if (demandCtx) {
                // Function to get demand color based on value
                function getDemandColor(value) {
                    if (value >= 91) return '#ef4444'; // Very High
                    if (value >= 81) return '#fca5a5'; // High
                    if (value >= 71) return '#3b82f6'; // Normal/Medium
                    return '#93c5fd'; // Low
                }
                
                const demandData = [72, 75, 78, 78.5];
                // Map each data value to its corresponding color
                const demandColors = demandData.map(value => getDemandColor(value));
                
                demandTrendsChart = new Chart(demandCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                        datasets: [{
                            label: 'Demand Index',
                            data: demandData,
                            backgroundColor: demandColors,
                            borderWidth: 0,
                            borderRadius: 8,
                            borderSkipped: false
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        },
                        onHover: (event, activeElements) => {
                            event.native.target.style.cursor = 'default';
                        },
                        onClick: (event, activeElements, chart) => {
                            if (activeElements.length > 0) {
                                // Show tooltip for the clicked bar
                                const clickedIndex = activeElements[0].index;
                                chart.tooltip.setActiveElements([{datasetIndex: 0, index: clickedIndex}], {x: event.x, y: event.y});
                                chart.update('none');
                            } else {
                                // Hide tooltip when clicking outside
                                chart.setActiveElements([]);
                                chart.tooltip.setActiveElements([], {x: 0, y: 0});
                                chart.update('none');
                            }
                        },
                        events: ['click', 'touchstart'],
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: true,
                                backgroundColor: '#1e293b',
                                padding: 12,
                                titleFont: {
                                    size: 14,
                                    weight: 'bold'
                                },
                                bodyFont: {
                                    size: 13
                                },
                                displayColors: false,
                                callbacks: {
                                    label: function(context) {
                                        return 'Demand: ' + context.parsed.y;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 70,
                                max: 80,
                                grid: {
                                    color: '#f1f5f9',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: '#64748b',
                                    font: {
                                        size: 11
                                    },
                                    stepSize: 2
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    color: '#64748b',
                                    font: {
                                        size: 11
                                    }
                                }
                            }
                        }
                    }
                });
                
                // Add click outside handler to hide tooltip
                document.addEventListener('click', function(event) {
                    if (demandTrendsChart) {
                        const chartContainer = demandCtx.closest('div');
                        const canvas = document.getElementById('demandTrendsChart');
                        if (chartContainer && canvas && !chartContainer.contains(event.target) && event.target !== canvas) {
                            // Clicked outside chart - hide tooltip
                            demandTrendsChart.setActiveElements([]);
                            demandTrendsChart.tooltip.setActiveElements([], {x: 0, y: 0});
                            demandTrendsChart.update('none');
                        }
                    }
                });
            }

            // Market Demand Chart
            const marketCtx = document.getElementById('marketDemandChart');
            if (marketCtx) {
                marketDemandChart = new Chart(marketCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Market Demand',
                            data: [65, 68, 72, 70, 75, 78.5],
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 0,
                            pointHoverRadius: 6,
                            pointHoverBorderWidth: 2,
                            pointBackgroundColor: '#10b981',
                            pointBorderColor: '#ffffff',
                            pointHoverBackgroundColor: '#10b981',
                            pointHoverBorderColor: '#ffffff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: true,
                                backgroundColor: '#1e293b',
                                padding: 12,
                                titleFont: {
                                    size: 14,
                                    weight: 'bold'
                                },
                                bodyFont: {
                                    size: 13
                                },
                                displayColors: false,
                                callbacks: {
                                    label: function(context) {
                                        return 'Market Demand: ' + context.parsed.y + '%';
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                display: true,
                                beginAtZero: false,
                                min: 60,
                                max: 85,
                                grid: {
                                    color: '#f1f5f9',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: '#64748b',
                                    font: {
                                        size: 11
                                    },
                                    stepSize: 5,
                                    maxTicksLimit: 6,
                                    callback: function(value, index, ticks) {
                                        return value + '%';
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    color: '#64748b',
                                    font: {
                                        size: 10
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        // Initialize Rate Trends Page Chart
        function initRateTrendsPageChart() {
            const rateTrendsPageCtx = document.getElementById('rateTrendsPageChart');
            if (rateTrendsPageCtx && (!rateTrendsPageChart || rateTrendsPageChart.data === undefined)) {
                rateTrendsPageChart = new Chart(rateTrendsPageCtx, {
                    type: 'line',
                    data: {
                        labels: [
                            ['7', 'Jan'],
                            ['8', 'Jan'],
                            ['9', 'Jan'],
                            ['10', 'Jan'],
                            ['11', 'Jan'],
                            ['12', 'Jan'],
                            ['13', 'Jan']
                        ],
                        datasets: [
                            {
                                label: 'My ADR',
                                data: [220, 235, 245, 250, 260, 280, 275],
                                borderColor: '#008FFF',
                                backgroundColor: 'transparent',
                                borderWidth: 3,
                                fill: false,
                                tension: 0.4,
                                pointRadius: 0,
                                pointHoverRadius: 6,
                                pointHoverBorderWidth: 2,
                                pointBackgroundColor: '#008FFF',
                                pointBorderColor: '#ffffff',
                                pointHoverBackgroundColor: '#008FFF',
                                pointHoverBorderColor: '#ffffff'
                            },
                            {
                                label: 'Comp. Avg.',
                                data: [225, 230, 250, 245, 265, 275, 280],
                                borderColor: '#f59e0b',
                                backgroundColor: 'rgba(245, 158, 11, 0.2)',
                                borderWidth: 3,
                                fill: true,
                                tension: 0.4,
                                pointRadius: 0,
                                pointHoverRadius: 6,
                                pointHoverBorderWidth: 2,
                                pointBackgroundColor: '#f59e0b',
                                pointBorderColor: '#ffffff',
                                pointHoverBackgroundColor: '#f59e0b',
                                pointHoverBorderColor: '#ffffff'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        },
                        onHover: (event, activeElements) => {
                            event.native.target.style.cursor = 'default';
                        },
                        onClick: (event, activeElements, chart) => {
                            if (activeElements.length > 0) {
                                // Show points for the clicked data point
                                const clickedIndex = activeElements[0].index;
                                
                                // Update point radius for clicked point
                                chart.data.datasets.forEach((dataset) => {
                                    const pointRadiusArray = new Array(dataset.data.length).fill(0);
                                    pointRadiusArray[clickedIndex] = 6;
                                    dataset.pointRadius = pointRadiusArray;
                                });
                                chart.update('none');
                            } else {
                                // Hide points and tooltip when clicking outside
                                chart.setActiveElements([]);
                                chart.tooltip.setActiveElements([], {x: 0, y: 0});
                                chart.data.datasets.forEach((dataset) => {
                                    dataset.pointRadius = 0;
                                });
                                chart.update('none');
                            }
                        },
                        events: ['click', 'touchstart'],
                        plugins: {
                            legend: {
                                display: true,
                                position: 'bottom',
                                align: 'center',
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: 'circle',
                                    padding: 15,
                                    font: {
                                        size: 12,
                                        weight: '400'
                                    },
                                    color: '#64748b',
                                    boxWidth: 5,
                                    boxHeight: 5,
                                    generateLabels: function(chart) {
                                        const original = Chart.defaults.plugins.legend.labels.generateLabels;
                                        const labels = original.call(this, chart);
                                        labels.forEach((label, index) => {
                                            if (index === 0) {
                                                label.text = 'My ADR';
                                                label.fillStyle = '#008FFF';
                                                label.strokeStyle = '#008FFF';
                                            } else if (index === 1) {
                                                label.text = 'Compset Average';
                                                label.fillStyle = '#f59e0b';
                                                label.strokeStyle = '#f59e0b';
                                            }
                                        });
                                        return labels;
                                    }
                                }
                            },
                            tooltip: {
                                enabled: true,
                                backgroundColor: '#1e293b',
                                padding: 12,
                                titleFont: {
                                    size: 14,
                                    weight: 'bold'
                                },
                                bodyFont: {
                                    size: 13
                                },
                                displayColors: false,
                                callbacks: {
                                    title: function(context) {
                                        const dataIndex = context[0].dataIndex;
                                        const chart = context[0].chart;
                                        const label = chart.data.labels[dataIndex];
                                        if (Array.isArray(label)) {
                                            return label[0] + ' ' + label[1];
                                        }
                                        // If it's already a string with comma, remove it
                                        if (typeof label === 'string' && label.includes(',')) {
                                            return label.replace(',', '');
                                        }
                                        return label;
                                    },
                                    label: function(context) {
                                        return context.dataset.label + ': $' + context.parsed.y;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                display: true,
                                beginAtZero: false,
                                min: 200,
                                max: 300,
                                grid: {
                                    color: '#f1f5f9',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: '#64748b',
                                    font: {
                                        size: 11
                                    },
                                    stepSize: 25,
                                    maxTicksLimit: 5,
                                    callback: function(value, index, ticks) {
                                        // Show only 3 specific values
                                        const showValues = [200, 250, 300];
                                        if (showValues.includes(value)) {
                                            return value;
                                        }
                                        return '';
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    color: '#64748b',
                                    font: {
                                        size: 11
                                    },
                                    maxRotation: 0
                                }
                            }
                        }
                    }
                });
                
                // Add click outside handler to hide tooltip and dots
                document.addEventListener('click', function(event) {
                    if (rateTrendsPageChart) {
                        const chartContainer = document.getElementById('rate-trends-page-chart');
                        const canvas = document.getElementById('rateTrendsPageChart');
                        if (chartContainer && canvas && !chartContainer.contains(event.target) && event.target !== canvas) {
                            // Clicked outside chart - hide tooltip and points
                            rateTrendsPageChart.setActiveElements([]);
                            rateTrendsPageChart.tooltip.setActiveElements([], {x: 0, y: 0});
                            rateTrendsPageChart.data.datasets.forEach((dataset) => {
                                dataset.pointRadius = 0;
                            });
                            rateTrendsPageChart.update('none');
                        }
                    }
                });
            }
        }

        // Calendar functions
        function getDemandClass(demand) {
            if (demand >= 91) return 'demand-very-high';
            if (demand >= 81) return 'demand-high';
            if (demand >= 71) return 'demand-medium';
            return 'demand-low';
        }

        function formatDate(year, month, day) {
            return `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        }

        function getDefaultDemand(day) {
            // Generate a default demand value based on day of month for days without data
            // Weekends typically have higher demand
            const dayOfWeek = new Date(currentYear, currentMonth, day).getDay();
            const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;
            const baseDemand = 70 + (day % 10) * 2;
            return isWeekend ? Math.min(95, baseDemand + 5) : baseDemand;
        }

        function renderCalendar() {
            const year = currentYear;
            const month = currentMonth;
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDayOfWeek = firstDay.getDay();

            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 
                              'July', 'August', 'September', 'October', 'November', 'December'];
            
            document.querySelector('.calendar-month').textContent = `${monthNames[month]} ${year}`;

            const calendarDays = document.getElementById('calendar-days');
            calendarDays.innerHTML = '';

            // Empty cells for days before the first day of the month
            for (let i = 0; i < startingDayOfWeek; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day empty';
                calendarDays.appendChild(emptyDay);
            }

            // Days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = formatDate(year, month, day);
                let dayData = calendarData[dateStr];
                
                // If no data exists, generate default values
                if (!dayData) {
                    const defaultDemand = getDefaultDemand(day);
                    dayData = {
                        demand: defaultDemand,
                        occupancy: Math.max(60, defaultDemand - 3)
                    };
                }
                
                const dayElement = document.createElement('div');
                const demandClass = getDemandClass(dayData.demand);
                dayElement.className = `calendar-day has-data ${demandClass}`;
                
                dayElement.innerHTML = `
                    <div class="calendar-day-number">${day}</div>
                    <div class="calendar-day-tooltip">
                        Demand: ${dayData.demand}%<br>
                        Occupancy: ${dayData.occupancy}%
                    </div>
                `;
                
                // Add click handler to show/hide tooltip
                dayElement.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const isShowing = this.classList.contains('show-tooltip');
                    
                    // Hide all other tooltips
                    document.querySelectorAll('.calendar-day.has-data').forEach(day => {
                        day.classList.remove('show-tooltip');
                    });
                    
                    // Toggle this tooltip
                    if (!isShowing) {
                        this.classList.add('show-tooltip');
                    }
                });
                
                calendarDays.appendChild(dayElement);
            }
        }

        function changeMonth(direction) {
            currentMonth += direction;
            
            // Handle year rollover
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            } else if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            
            renderCalendar();
        }

        // Channel Cards Data
        const channelData = [
            {
                id: 'booking',
                name: 'Booking.com',
                logo: 'B',
                logoClass: 'booking',
                ranking: { value: 25, total: 500 },
                reviews: { value: 8.7, total: 10 },
                parity: '--'
            },
            {
                id: 'agoda',
                name: 'Agoda',
                logo: 'a',
                logoClass: 'agoda',
                ranking: { value: 50, total: 500 },
                reviews: { value: 8.6, total: 10 },
                parity: '--'
            },
            {
                id: 'makemytrip',
                name: 'MakeMyTrip',
                logo: 'M',
                logoClass: 'makemytrip',
                ranking: { value: 35, total: 500 },
                reviews: { value: 8.5, total: 10 },
                parity: '--'
            }
        ];

        let currentChannelIndex = 0;

        function renderChannels() {
            const container = document.getElementById('channel-cards');
            const dotsContainer = document.getElementById('channel-dots');
            
            if (!container) {
                console.log('Channel cards container not found');
                return;
            }
            
            if (!dotsContainer) {
                console.log('Channel dots container not found');
                return;
            }
            
            container.innerHTML = '';
            dotsContainer.innerHTML = '';
            
            // Create all channel cards
            channelData.forEach((channel, index) => {
                // Channel card
                const card = document.createElement('div');
                card.className = 'channel-card';
                
                card.innerHTML = `
                    <button class="channel-nav prev" onclick="changeChannel(-1)">
                        <span class="material-icons" style="font-size: 18px; color: #64748b;">chevron_left</span>
                    </button>
                    <button class="channel-nav next" onclick="changeChannel(1)">
                        <span class="material-icons" style="font-size: 18px; color: #64748b;">chevron_right</span>
                    </button>
                    <div class="channel-header">
                        <div class="channel-logo ${channel.logoClass}">${channel.logo}</div>
                        <div class="channel-name">${channel.name}</div>
                    </div>
                    <div class="channel-metrics">
                        <div class="channel-metric">
                            <div class="metric-category">Ranking</div>
                            <div class="metric-main-value">${channel.ranking.value}</div>
                            <div class="metric-sub-value">of ${channel.ranking.total}</div>
                        </div>
                        <div class="channel-metric">
                            <div class="metric-category">Reviews</div>
                            <div class="metric-main-value">${channel.reviews.value}</div>
                            <div class="metric-sub-value">out of ${channel.reviews.total}</div>
                        </div>
                        <div class="channel-metric">
                            <div class="metric-category">Parity</div>
                            <div class="metric-main-value">${channel.parity}</div>
                            <div class="metric-sub-value" style="opacity: 0;">&nbsp;</div>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
                
                // Dot indicator
                const dot = document.createElement('div');
                dot.className = `channel-dot ${index === currentChannelIndex ? 'active' : ''}`;
                dot.onclick = () => goToChannel(index);
                dotsContainer.appendChild(dot);
            });
            
            // Force reflow and then apply transform
            container.offsetHeight; // Force reflow
            container.style.transform = `translateX(-${currentChannelIndex * 100}%)`;
            
            // Update navigation buttons in all cards
            const allCards = container.querySelectorAll('.channel-card');
            allCards.forEach((card, cardIndex) => {
                const prevBtn = card.querySelector('.channel-nav.prev');
                const nextBtn = card.querySelector('.channel-nav.next');
                
                if (prevBtn) {
                    prevBtn.disabled = currentChannelIndex === 0;
                    prevBtn.style.opacity = currentChannelIndex === 0 ? '0.3' : '1';
                    prevBtn.style.cursor = currentChannelIndex === 0 ? 'not-allowed' : 'pointer';
                }
                
                if (nextBtn) {
                    nextBtn.disabled = currentChannelIndex === channelData.length - 1;
                    nextBtn.style.opacity = currentChannelIndex === channelData.length - 1 ? '0.3' : '1';
                    nextBtn.style.cursor = currentChannelIndex === channelData.length - 1 ? 'not-allowed' : 'pointer';
                }
            });
        }

        function changeChannel(direction) {
            const newIndex = currentChannelIndex + direction;
            if (newIndex >= 0 && newIndex < channelData.length) {
                currentChannelIndex = newIndex;
                renderChannels();
            }
        }

        function goToChannel(index) {
            currentChannelIndex = index;
            renderChannels();
        }

        // Market Demand Cards Data
        const marketDemandData = [
            {
                id: 'demand-index',
                title: 'Demand Index',
                value: '49.71'
            },
            {
                id: 'market-adr',
                title: 'Market ADR',
                value: '$99.00'
            },
            {
                id: 'market-revpar',
                title: 'Market RevPAR',
                value: '$58.41'
            },
            {
                id: 'market-occupancy',
                title: 'Market Occupancy',
                value: '59%'
            }
        ];

        let currentMarketDemandIndex = 0;

        function renderMarketDemand() {
            const container = document.getElementById('market-demand-cards');
            const dotsContainer = document.getElementById('market-demand-dots');
            
            if (!container) {
                console.log('Market demand cards container not found');
                return;
            }
            
            if (!dotsContainer) {
                console.log('Market demand dots container not found');
                return;
            }
            
            container.innerHTML = '';
            dotsContainer.innerHTML = '';
            
            // Create all market demand cards
            marketDemandData.forEach((card, index) => {
                // Market demand card
                const cardElement = document.createElement('div');
                cardElement.className = 'market-demand-card';
                
                cardElement.innerHTML = `
                    <button class="market-demand-nav prev" onclick="changeMarketDemand(-1)">
                        <span class="material-icons" style="font-size: 18px; color: #64748b;">chevron_left</span>
                    </button>
                    <button class="market-demand-nav next" onclick="changeMarketDemand(1)">
                        <span class="material-icons" style="font-size: 18px; color: #64748b;">chevron_right</span>
                    </button>
                    <div class="market-demand-card-header">
                        <div class="market-demand-card-title">${card.title}</div>
                    </div>
                    <div class="market-demand-card-value">${card.value}</div>
                `;
                
                container.appendChild(cardElement);
                
                // Dot indicator
                const dot = document.createElement('div');
                dot.className = `market-demand-dot ${index === currentMarketDemandIndex ? 'active' : ''}`;
                dot.onclick = () => goToMarketDemand(index);
                dotsContainer.appendChild(dot);
            });
            
            // Force reflow and then apply transform
            container.offsetHeight; // Force reflow
            container.style.transform = `translateX(-${currentMarketDemandIndex * 100}%)`;
            
            // Update navigation buttons in all cards
            const allCards = container.querySelectorAll('.market-demand-card');
            allCards.forEach((card, cardIndex) => {
                const prevBtn = card.querySelector('.market-demand-nav.prev');
                const nextBtn = card.querySelector('.market-demand-nav.next');
                
                if (prevBtn) {
                    prevBtn.disabled = currentMarketDemandIndex === 0;
                    prevBtn.style.opacity = currentMarketDemandIndex === 0 ? '0.3' : '1';
                    prevBtn.style.cursor = currentMarketDemandIndex === 0 ? 'not-allowed' : 'pointer';
                }
                
                if (nextBtn) {
                    nextBtn.disabled = currentMarketDemandIndex === marketDemandData.length - 1;
                    nextBtn.style.opacity = currentMarketDemandIndex === marketDemandData.length - 1 ? '0.3' : '1';
                    nextBtn.style.cursor = currentMarketDemandIndex === marketDemandData.length - 1 ? 'not-allowed' : 'pointer';
                }
            });
        }

        function changeMarketDemand(direction) {
            const newIndex = currentMarketDemandIndex + direction;
            if (newIndex >= 0 && newIndex < marketDemandData.length) {
                currentMarketDemandIndex = newIndex;
                renderMarketDemand();
            }
        }

        function goToMarketDemand(index) {
            currentMarketDemandIndex = index;
            renderMarketDemand();
        }

        // Initialize charts, calendar, and channels when page loads
        // Add scroll listener for table navigation
        document.addEventListener('DOMContentLoaded', function() {
            const tableContainer = document.getElementById('rate-trends-page-table');
            if (tableContainer) {
                tableContainer.addEventListener('scroll', updateTableNavButtons);
                // Initialize button states
                setTimeout(() => {
                    updateTableNavButtons();
                }, 100);
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            // Show overview page as default
            document.getElementById('overview-page').style.display = 'block';
            document.getElementById('demand-page').style.display = 'none';
            document.getElementById('rate-trends-page').style.display = 'none';
            
            // Set Overview as active in hamburger menu
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                const navText = item.querySelector('.nav-item-text');
                if (navText && navText.textContent === 'Overview') {
                    item.classList.add('active');
                }
            });
            
            initCharts();
            // Small delay to ensure DOM is fully ready
            setTimeout(() => {
                renderChannels();
                renderMarketDemand();
            }, 100);
            
            // Hide tooltips when clicking outside calendar cells and demand trends chart
            document.addEventListener('click', function(e) {
                const calendarDays = document.getElementById('calendar-days');
                const demandChartCanvas = document.getElementById('demandTrendsChart');
                
                // Hide calendar tooltips
                if (calendarDays && !calendarDays.contains(e.target)) {
                    document.querySelectorAll('.calendar-day.has-data').forEach(day => {
                        day.classList.remove('show-tooltip');
                    });
                }
                
                // Hide demand trends chart tooltip (handled by dedicated click outside handler above)
            });
        });
        
    </script>
</body>
</html>

